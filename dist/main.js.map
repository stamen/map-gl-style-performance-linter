{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A,Y,C;A,M,C,c,C,c,E,Y,E;I,K,E,I;C,C,C;A,c,C,S,C,G,K,C,C;;;AAEA,IAAMA,0BAAI,GAAG,SAAPA,IAAO,CAAAC,KAAK,EAAI;IACpB,IAAIC,QAAQ,GAAG,EAAf,AAAA;IACAA,QAAQ,GAAGA,QAAQ,CAACC,MAAT,CAAgB,AAAA,CAAA,GAAA,sBAAA,CAAA,CAAgBF,KAAhB,CAAhB,CAAX,CAAAC;IACA,OAAOA,QAAP,CAAA;CAHF,AAIC;AAEcF,IAAAA,8BAAAA,GAAAA,0B,AAAAA;A,c,C,S,C,G,8B,C;;;;A,Y,C;A,M,C,c,C,c,E,Y,E;I,K,E,I;C,C,C;A,c,C,e,G,K,C,C;;;ACNf,IAAIE,8BAAQ,GAAG,EAAf,AAAA;AAEA,IAAME,qCAAe,GAAG,SAAlBA,eAAkB,CAAAH,KAAK,EAAI;IAC/BC,8BAAQ,GAAGA,8BAAQ,CAACC,MAAT,CAAgB,AAAA,CAAA,GAAA,iCAAA,CAAA,CAA2BF,KAA3B,CAAhB,CAAX,CAAAC;IACA,OAAOA,8BAAP,CAAA;CAFF,AAGC;A,c,C,e,G,qC,C;;;;A,Y,C;A,M,C,c,C,c,E,Y,E;I,K,E,I;C,C,C;A,c,C,0B,G,K,C,C;;ACLD,IAAIA,8BAAQ,GAAG,EAAf,AAAA;AAEA;;;;;GAKA,CACA,IAAMG,qCAAe,GAAG,SAAlBA,eAAkB,CAACC,OAAD,EAAUC,QAAV,EAAoBC,GAApB,EAA4B;IAClD,IAAIC,MAAM,GAAG,EAAb,AAAA;IACA,IAAMC,OAAO,GAAG,EAAhB,AAAA;IACA,IAAIC,YAAY,GAAGJ,QAAQ,CAACK,KAAT,CAAe,CAAf,CAAnB,AAAA;IACA,IAAMC,QAAQ,GAAGF,YAAY,CAACG,GAAb,EAAjB,AAAA;IACAH,YAAY,CAACI,OAAb,CAAqB,SAACC,GAAD,EAAMC,CAAN,EAArBN;QAAqB,OACnBM,CAAC,GAAG,CAAJ,KAAU,CAAV,GAAcP,OAAO,CAACQ,IAAR,CAAaF,GAAb,CAAd,GAAkCP,MAAM,CAACS,IAAP,CAAYF,GAAZ,CADf,CAAA;KAArB,CAAqB,CAAA;IAGrBN,OAAO,CAACQ,IAAR,CAAaL,QAAb,CAAAH,CAAAA;IACAD,MAAM,GAAGA,MAAM,CAACU,IAAP,CAAY,CAAZ,CAAT,CAAAV;IAEA,IAAMW,aAAa,GAAGX,MAAM,CAACY,MAAP,KAAkB,CAAxC,AAAA;IACA,IAAMC,oBAAoB,GACxBZ,OAAO,CAACW,MAAR,KAAmB,CAAnB,IAAwBX,OAAO,CAACa,QAAR,CAAiB,IAAjB,CAAxB,IAAkDb,OAAO,CAACa,QAAR,CAAiB,KAAjB,CADpD,AAAA;IAGA,IAAIH,aAAa,IAAIE,oBAArB,EACEpB,8BAAQ,CAACgB,IAAT,CAAA,EAAA,CAAA,MAAA,CACKZ,OADL,EAAA,IAAA,CAAA,CAAA,MAAA,CACiBE,GADjB,EAAA,oCAAA,CAAA,CAAA,MAAA,CACyDgB,IAAI,CAACC,SAAL,CACrDlB,QADqD,CADzD,CAAAL,CAAAA,CAAAA;IAOF,OAAOK,QAAP,CAAA;CAvBF,AAwBC;AAED;;;;;GAKA,CACA,IAAMmB,0CAAoB,GAAG,SAAvBA,oBAAuB,CAAAC,GAAG,EAAI;IAClC,OAAO,CAAC,CAAEC,CAAAA,KAAK,CAACC,OAAN,CAAcF,GAAd,CAAA,IAAsBA,GAAG,CAAC,CAAD,CAAH,KAAW,OAAnC,CAAA,AAAR,CAAA;CADF,AAEC;AAED,IAAMG,gDAA0B,GAAG,SAA7BA,0BAA6B,CAAA7B,KAAK,EAAI;IAC1C,IAAM8B,iBAAiB,GAAG,AAAA,CAAA,GAAA,8CAAA,CAAA,CAAmB;QAC3CC,WAAW,EAAE3B,qCAD8B;QAE3C4B,kBAAkB,EAAEP,0CAApBO;KAFwB,CAA1B,AAA6C;IAI7CF,iBAAiB,CAAC9B,KAAD,CAAjB,CAAA8B;IACA,OAAO7B,8BAAP,CAAA;CANF,AAOC;A,c,C,0B,G,gD,C;;;;;;A,Y,C;A,M,C,c,C,c,E,Y,E;I,K,E,I;C,C,C;A,M,C,c,C,c,E,M,E;I,U,E,I;I,G,E,S,G,G;Q,O,2B,C,S,C,C;K;C,C,C;;ACrDD,IAAA,2BAAA,GAAA,4CAAA,CAAA,wBAAA,CAAA,AAAA;A,S,4C,C,G,E;I,O,G,I,G,C,U,G,G,G;Q,S,E,G;K,C;C","sources":["src/lib/lint.js","src/lib/lint-expressions.js","src/lib/expressions/single-match.js","src/index.js"],"sourcesContent":["import { lintExpressions } from './lint-expressions';\n\nconst lint = style => {\n  let warnings = [];\n  warnings = warnings.concat(lintExpressions(style));\n  return warnings;\n};\n\nexport default lint;\n","import { lintSingleMatchExpressions } from './expressions/single-match';\n\nlet warnings = [];\n\nconst lintExpressions = style => {\n  warnings = warnings.concat(lintSingleMatchExpressions(style));\n  return warnings;\n};\n\nexport { lintExpressions };\n","import { createRecurseStyle } from 'mapbox-gl-style-recurse';\n\nlet warnings = [];\n\n/**\n * lintSingleMatch\n * Checks if a match expression has a single input and outputs true, false\n * @param {Array} matchExp - match expression\n * @returns {Array} - either the same match expression or more performant \"==\" expression\n */\nconst lintSingleMatch = (layerId, matchExp, key) => {\n  let inputs = [];\n  const outputs = [];\n  let inputOutputs = matchExp.slice(2);\n  const fallback = inputOutputs.pop();\n  inputOutputs.forEach((val, i) =>\n    i % 2 !== 0 ? outputs.push(val) : inputs.push(val)\n  );\n  outputs.push(fallback);\n  inputs = inputs.flat(1);\n\n  const isSingleInput = inputs.length === 1;\n  const isAppropriateOutputs =\n    outputs.length === 2 && outputs.includes(true) && outputs.includes(false);\n\n  if (isSingleInput && isAppropriateOutputs) {\n    warnings.push(\n      `${layerId}: ${key} contains single match expression ${JSON.stringify(\n        matchExp\n      )}`\n    );\n  }\n\n  return matchExp;\n};\n\n/**\n * replaceSingleMatchCondition\n * Condition to run single match linter on\n * @param {Array} exp - expression\n * @returns {boolean} - true or false\n */\nconst singleMatchCondition = exp => {\n  return !!(Array.isArray(exp) && exp[0] === 'match');\n};\n\nconst lintSingleMatchExpressions = style => {\n  const lintSingleMatches = createRecurseStyle({\n    transformFn: lintSingleMatch,\n    transformCondition: singleMatchCondition\n  });\n  lintSingleMatches(style);\n  return warnings;\n};\n\nexport { lintSingleMatchExpressions };\n","import lint from './lib/lint';\n\nexport { lint };\n"],"names":["lint","style","warnings","concat","lintExpressions","lintSingleMatch","layerId","matchExp","key","inputs","outputs","inputOutputs","slice","fallback","pop","forEach","val","i","push","flat","isSingleInput","length","isAppropriateOutputs","includes","JSON","stringify","singleMatchCondition","exp","Array","isArray","lintSingleMatchExpressions","lintSingleMatches","transformFn","transformCondition"],"version":3,"file":"main.js.map"}